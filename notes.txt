✅ AVD Layer
You can modularize this or keep it flat depending on complexity. Recommended resources:

azurerm_virtual_desktop_host_pool

azurerm_virtual_desktop_application_group

azurerm_virtual_desktop_workspace

azurerm_virtual_desktop_workspace_application_group_association

azurerm_role_assignment (for access control, especially for users)

azurerm_virtual_machine (for session hosts)

✅ Compute Layer
For VMs (session hosts), define:

azurerm_windows_virtual_machine (or Linux variant)

Add extensions like azurerm_virtual_machine_extension for FSLogix, domain jo


remote: error: Trace: c801f692246452d4940d9ea3bd99601ca3b4f79fb3c31919bb441e8fb32928e4
remote: error: See https://gh.io/lfs for more information.
remote: error: File .terraform/providers/registry.terraform.io/hashicorp/azurerm/4.29.0/windows_386/terraform-provider-azurerm_v4.29.0_x5.exe is 206.81 MB; this exceeds GitHub's file size limit of 100.00 MB
remote: error: File .terraform/providers/registry.terraform.io/hashicorp/azurerm/4.33.0/windows_386/terraform-provider-azurerm_v4.33.0_x5.exe is 207.16 MB; this exceeds GitHub's file size limit of 100.00 MB
remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.
To https://github.com/StanInPrime/AVD-Home-Lab
 ! [remote rejected] main -> main (pre-receive hook declined)
error: failed to push some refs to 'https://github.com/StanInPrime/AVD-Home-Lab'


module "compute" {
  source              = "./modules/compute"
  vm_name             = local.vm_name
  resource_group_name = azurerm_resource_group.rg.name
  location            = local.location
  subnet_id           = module.network.subnet_id
  uai_id              = module.identity.uai_id
  tags                = local.tags
}

module "storage" {
  source              = "./modules/storage"
  storage_account_name = local.storage_account_name
  resource_group_name = azurerm_resource_group.rg.name
  location            = local.location
  tags                = local.tags
}

  ## Storage
  storage_name = "${local.prefix}-storage-${local.environment}-${local.location}-${random_integer.suffix.result}"
  account_tier = "Standard"
  account_replication_type = "LRS"
  file_share_name = "FSLogix"
